<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypeMaster - Typing Practice</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px 0;
            border-bottom: 1px solid #ddd;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        .stats-container {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
            background-color: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .stat-label {
            font-size: 14px;
            color: #7f8c8d;
        }
        
        .text-container {
            background-color: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            min-height: 200px;
        }
        
        #typing-text {
            font-size: 20px;
            line-height: 1.8;
            color: #34495e;
        }
        
        .current-char {
            background-color: #3498db;
            color: white;
            padding: 0 2px;
            border-radius: 2px;
        }
        
        .correct {
            color: #27ae60;
        }
        
        .incorrect {
            color: #e74c3c;
            text-decoration: underline;
        }
        
        .input-container {
            margin-bottom: 20px;
        }
        
        #typing-input {
            width: 100%;
            padding: 15px;
            font-size: 18px;
            border: 2px solid #ddd;
            border-radius: 8px;
            outline: none;
            transition: border-color 0.3s;
        }
        
        #typing-input:focus {
            border-color: #3498db;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        button {
            padding: 10px 15px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
            margin: 5px;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .keyboard {
            background-color: #2c3e50;
            padding: 15px;
            border-radius: 8px;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .keyboard-row {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
        }
        
        .key {
            background-color: #34495e;
            color: white;
            padding: 8px 12px;
            margin: 3px;
            border-radius: 4px;
            min-width: 30px;
            text-align: center;
            font-size: 14px;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.2);
        }
        
        .key.active {
            background-color: #3498db;
            transform: translateY(2px);
            box-shadow: 0 0 0 rgba(0, 0, 0, 0.2);
        }
        
        .space {
            width: 200px;
        }
        
        .mode-selector {
            display: flex;
            justify-content: center;
            margin-bottom: 20px;
        }
        
        .mode-btn {
            background-color: #95a5a6;
        }
        
        .mode-btn.active {
            background-color: #3498db;
        }
        
        footer {
            text-align: center;
            margin-top: 30px;
            padding: 20px 0;
            color: #7f8c8d;
            font-size: 14px;
        }
        
        @media (max-width: 768px) {
            .keyboard {
                display: none;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .controls button {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>TypeMaster</h1>
            <p>Improve your typing skills with practice</p>
        </header>
        
        <div class="stats-container">
            <div class="stat">
                <div class="stat-value" id="wpm">0</div>
                <div class="stat-label">WPM</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="accuracy">100%</div>
                <div class="stat-label">Accuracy</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="timer">60</div>
                <div class="stat-label">Time Left</div>
            </div>
            <div class="stat">
                <div class="stat-value" id="errors">0</div>
                <div class="stat-label">Errors</div>
            </div>
        </div>
        
        <div class="mode-selector">
            <button class="mode-btn active" data-mode="quotes">Quotes</button>
            <button class="mode-btn" data-mode="english">English Words</button>
            <button class="mode-btn" data-mode="code">Code Snippets</button>
            <button class="mode-btn" data-mode="custom">Custom Text</button>
        </div>
        
        <div class="text-container">
            <div id="typing-text"></div>
        </div>
        
        <div class="input-container">
            <input type="text" id="typing-input" placeholder="Click here and start typing..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
        </div>
        
        <div class="controls">
            <button id="new-text-btn">New Text</button>
            <button id="reset-btn">Reset</button>
            <button id="timer-btn">Start Timer (1 min)</button>
            <button id="toggle-keyboard">Show Keyboard</button>
        </div>
        
        <div class="keyboard" id="keyboard" style="display: none;">
            <!-- Keyboard rows will be generated with JavaScript -->
        </div>
        
        <footer>
            <p>TypeMaster - Practice typing to improve your speed and accuracy</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Elements
            const typingText = document.getElementById('typing-text');
            const typingInput = document.getElementById('typing-input');
            const wpmElement = document.getElementById('wpm');
            const accuracyElement = document.getElementById('accuracy');
            const timerElement = document.getElementById('timer');
            const errorsElement = document.getElementById('errors');
            const newTextBtn = document.getElementById('new-text-btn');
            const resetBtn = document.getElementById('reset-btn');
            const timerBtn = document.getElementById('timer-btn');
            const toggleKeyboardBtn = document.getElementById('toggle-keyboard');
            const keyboard = document.getElementById('keyboard');
            const modeButtons = document.querySelectorAll('.mode-btn');
            
            // State variables
            let currentText = '';
            let currentMode = 'quotes';
            let startTime = null;
            let endTime = null;
            let totalKeystrokes = 0;
            let correctKeystrokes = 0;
            let errors = 0;
            let timerInterval = null;
            let timerSeconds = 60;
            let isTimerRunning = false;
            let isActive = false;
            
            // Sample texts for different modes
            const textSamples = {
                quotes: [
                    "The only way to do great work is to love what you do. - Steve Jobs",
                    "Life is what happens when you're busy making other plans. - John Lennon",
                    "The future belongs to those who believe in the beauty of their dreams. - Eleanor Roosevelt",
                    "It is during our darkest moments that we must focus to see the light. - Aristotle",
                    "Whoever is happy will make others happy too. - Anne Frank"
                ],
                english: [
                    "The quick brown fox jumps over the lazy dog. This sentence contains every letter in the English alphabet, making it perfect for typing practice.",
                    "Programming is the process of creating a set of instructions that tell a computer how to perform a task. Programming can be done using many programming languages.",
                    "Typing quickly and accurately is an essential skill in today's digital world. Practice regularly to improve your typing speed and reduce errors.",
                    "Web development is the work involved in developing a web site for the Internet or an intranet. Web development can range from developing a simple single static page to complex web applications."
                ],
                code: [
                    "function calculateSum(a, b) {\n  return a + b;\n}\n\nconst result = calculateSum(5, 10);\nconsole.log(result); // Output: 15",
                    "#include <iostream>\nusing namespace std;\n\nint main() {\n  cout << 'Hello, World!' << endl;\n  return 0;\n}",
                    "def fibonacci(n):\n    if n <= 1:\n        return n\n    else:\n        return fibonacci(n-1) + fibonacci(n-2)\n\nprint(fibonacci(10))",
                    "public class Main {\n  public static void main(String[] args) {\n    for(int i = 0; i < 5; i++) {\n      System.out.println('Hello');\n    }\n  }\n}"
                ]
            };
            
            // Initialize the application
            init();
            
            function init() {
                loadNewText();
                setupEventListeners();
                generateKeyboard();
            }
            
            function setupEventListeners() {
                typingInput.addEventListener('input', handleTyping);
                newTextBtn.addEventListener('click', loadNewText);
                resetBtn.addEventListener('click', resetTest);
                timerBtn.addEventListener('click', toggleTimer);
                toggleKeyboardBtn.addEventListener('click', toggleKeyboard);
                
                modeButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        modeButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        currentMode = this.getAttribute('data-mode');
                        loadNewText();
                    });
                });
            }
            
            function loadNewText() {
                resetTest();
                
                if (currentMode === 'custom') {
                    currentText = "Type your own text here. Click on the input field below and start typing. You can replace this text with anything you want to practice with.";
                } else {
                    const samples = textSamples[currentMode];
                    const randomIndex = Math.floor(Math.random() * samples.length);
                    currentText = samples[randomIndex];
                }
                
                renderText();
            }
            
            function renderText() {
                typingText.innerHTML = '';
                
                for (let i = 0; i < currentText.length; i++) {
                    const charSpan = document.createElement('span');
                    charSpan.textContent = currentText[i];
                    charSpan.id = `char-${i}`;
                    typingText.appendChild(charSpan);
                }
                
                // Highlight the first character
                if (currentText.length > 0) {
                    document.getElementById('char-0').classList.add('current-char');
                }
                
                typingInput.value = '';
                typingInput.focus();
            }
            
            function handleTyping() {
                if (!isActive) {
                    startTime = new Date();
                    isActive = true;
                }
                
                const typedText = typingInput.value;
                const currentCharIndex = typedText.length - 1;
                
                // Update character highlighting
                document.querySelectorAll('#typing-text span').forEach((span, index) => {
                    span.classList.remove('current-char', 'correct', 'incorrect');
                    
                    if (index === currentCharIndex) {
                        span.classList.add('current-char');
                    } else if (index < currentCharIndex) {
                        if (typedText[index] === currentText[index]) {
                            span.classList.add('correct');
                        } else {
                            span.classList.add('incorrect');
                        }
                    }
                });
                
                // Update stats
                totalKeystrokes++;
                
                if (typedText.length > 0) {
                    const lastTypedChar = typedText[typedText.length - 1];
                    const expectedChar = currentText[currentCharIndex];
                    
                    if (lastTypedChar === expectedChar) {
                        correctKeystrokes++;
                    } else {
                        errors++;
                    }
                }
                
                updateStats();
                
                // Check if text is completed
                if (typedText === currentText) {
                    endTime = new Date();
                    isActive = false;
                    typingInput.disabled = true;
                    
                    if (isTimerRunning) {
                        clearInterval(timerInterval);
                        isTimerRunning = false;
                        timerBtn.textContent = 'Start Timer (1 min)';
                    }
                }
            }
            
            function updateStats() {
                // Calculate WPM
                const now = new Date();
                const elapsedTime = (now - startTime) / 1000 / 60; // in minutes
                const wpm = elapsedTime > 0 ? Math.round((correctKeystrokes / 5) / elapsedTime) : 0;
                
                // Calculate accuracy
                const accuracy = totalKeystrokes > 0 ? Math.round((correctKeystrokes / totalKeystrokes) * 100) : 100;
                
                // Update UI
                wpmElement.textContent = wpm;
                accuracyElement.textContent = `${accuracy}%`;
                errorsElement.textContent = errors;
            }
            
            function resetTest() {
                clearInterval(timerInterval);
                
                startTime = null;
                endTime = null;
                totalKeystrokes = 0;
                correctKeystrokes = 0;
                errors = 0;
                isActive = false;
                isTimerRunning = false;
                timerSeconds = 60;
                
                wpmElement.textContent = '0';
                accuracyElement.textContent = '100%';
                timerElement.textContent = '60';
                errorsElement.textContent = '0';
                
                typingInput.disabled = false;
                typingInput.value = '';
                timerBtn.textContent = 'Start Timer (1 min)';
                
                renderText();
            }
            
            function toggleTimer() {
                if (isTimerRunning) {
                    clearInterval(timerInterval);
                    isTimerRunning = false;
                    timerBtn.textContent = 'Start Timer (1 min)';
                } else {
                    resetTest();
                    isTimerRunning = true;
                    timerBtn.textContent = 'Stop Timer';
                    
                    timerInterval = setInterval(function() {
                        timerSeconds--;
                        timerElement.textContent = timerSeconds;
                        
                        if (timerSeconds <= 0) {
                            clearInterval(timerInterval);
                            isTimerRunning = false;
                            typingInput.disabled = true;
                            endTime = new Date();
                            updateStats();
                            timerBtn.textContent = 'Start Timer (1 min)';
                        }
                    }, 1000);
                    
                    typingInput.focus();
                }
            }
            
            function toggleKeyboard() {
                if (keyboard.style.display === 'none') {
                    keyboard.style.display = 'block';
                    toggleKeyboardBtn.textContent = 'Hide Keyboard';
                } else {
                    keyboard.style.display = 'none';
                    toggleKeyboardBtn.textContent = 'Show Keyboard';
                }
            }
            
            function generateKeyboard() {
                const keyboardLayout = [
                    ['1', '2', '3', '4', '5', '6', '7', '8', '9', '0', '-', '=', 'Backspace'],
                    ['Tab', 'q', 'w', 'e', 'r', 't', 'y', 'u', 'i', 'o', 'p', '[', ']', '\\'],
                    ['Caps', 'a', 's', 'd', 'f', 'g', 'h', 'j', 'k', 'l', ';', '\'', 'Enter'],
                    ['Shift', 'z', 'x', 'c', 'v', 'b', 'n', 'm', ',', '.', '/', 'Shift'],
                    ['Ctrl', 'Win', 'Alt', 'Space', 'Alt', 'Menu', 'Ctrl']
                ];
                
                keyboard.innerHTML = '';
                
                keyboardLayout.forEach(row => {
                    const rowElement = document.createElement('div');
                    rowElement.classList.add('keyboard-row');
                    
                    row.forEach(key => {
                        const keyElement = document.createElement('div');
                        keyElement.classList.add('key');
                        
                        if (key === 'Space') {
                            keyElement.classList.add('space');
                        }
                        
                        keyElement.textContent = key;
                        keyElement.setAttribute('data-key', key);
                        
                        rowElement.appendChild(keyElement);
                    });
                    
                    keyboard.appendChild(rowElement);
                });
            }
            
            // Add keyboard highlighting when typing
            document.addEventListener('keydown', function(e) {
                const key = e.key;
                const keyElement = document.querySelector(`.key[data-key="${key}"]`);
                
                if (keyElement) {
                    keyElement.classList.add('active');
                }
            });
            
            document.addEventListener('keyup', function(e) {
                const key = e.key;
                const keyElement = document.querySelector(`.key[data-key="${key}"]`);
                
                if (keyElement) {
                    keyElement.classList.remove('active');
                }
            });
        });
    </script>
</body>
</html>